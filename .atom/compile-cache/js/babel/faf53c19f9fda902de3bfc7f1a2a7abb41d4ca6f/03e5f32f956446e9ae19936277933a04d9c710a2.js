function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _fsExtra = require('fs-extra');

var _fsExtra2 = _interopRequireDefault(_fsExtra);

var _temp = require('temp');

var _temp2 = _interopRequireDefault(_temp);

var _atomBuildSpecHelpers = require('atom-build-spec-helpers');

var _libMake = require('../lib/make');

'use babel';

describe('make', function () {
  var directory = undefined;
  var builder = undefined;
  var Builder = (0, _libMake.provideBuilder)();

  beforeEach(function () {
    atom.config.set('build-make.useMake', true);
    atom.config.set('build-make.jobs', 2);
    waitsForPromise(function () {
      return (0, _atomBuildSpecHelpers.vouch)(_temp2['default'].mkdir, 'atom-build-make-spec-').then(function (dir) {
        return (0, _atomBuildSpecHelpers.vouch)(_fsExtra2['default'].realpath, dir);
      }).then(function (dir) {
        return directory = dir + '/';
      }).then(function (dir) {
        return builder = new Builder(dir);
      });
    });
  });

  afterEach(function () {
    _fsExtra2['default'].removeSync(directory);
  });

  describe('when makefile exists', function () {
    beforeEach(function () {
      _fsExtra2['default'].writeFileSync(directory + 'Makefile', _fsExtra2['default'].readFileSync(__dirname + '/Makefile'));
    });

    it('should be eligible', function () {
      expect(builder.isEligible(directory)).toBe(true);
    });

    it('should yield available targets', function () {
      waitsForPromise(function () {
        return Promise.resolve(builder.settings(directory)).then(function (settings) {
          expect(settings.length).toBe(4); // default (no target), all, some_custom and Makefile

          var defaultTarget = settings[0]; // default MUST be first
          expect(defaultTarget.name).toBe('GNU Make: default (no target)');
          expect(defaultTarget.exec).toBe('make');
          expect(defaultTarget.args).toEqual(['-j2']);
          expect(defaultTarget.sh).toBe(false);

          var target = settings.find(function (setting) {
            return setting.name === 'GNU Make: some_custom';
          });
          expect(target.name).toBe('GNU Make: some_custom');
          expect(target.exec).toBe('make');
          expect(target.args).toEqual(['-j2', 'some_custom']);
          expect(target.sh).toBe(false);
        });
      });
    });

    it('should yield a subset of all targets if it does not use make to extract targets', function () {
      atom.config.set('build-make.useMake', false);
      waitsForPromise(function () {
        expect(builder.isEligible(directory)).toBe(true);
        return Promise.resolve(builder.settings(directory)).then(function (settings) {
          var targetNames = settings.map(function (s) {
            return s.name;
          }).sort();
          expect(targetNames).toEqual(['GNU Make: default (no target)', 'GNU Make: all', 'GNU Make: some_custom'].sort());
        });
      });
    });
  });

  describe('when makefile exists but make can not run', function () {
    var originalPath = process.env.PATH;
    beforeEach(function () {
      _fsExtra2['default'].writeFileSync(directory + 'Makefile', _fsExtra2['default'].readFileSync(__dirname + '/Makefile'));
      process.env.PATH = '';
    });

    afterEach(function () {
      process.env.PATH = originalPath;
    });

    it('should be eligible', function () {
      expect(builder.isEligible(directory)).toBe(true);
    });

    it('should list the default target', function () {
      waitsForPromise(function () {
        return Promise.resolve(builder.settings(directory)).then(function (settings) {
          expect(settings.length).toBe(1); // default (no target)

          var defaultTarget = settings[0]; // default MUST be first
          expect(defaultTarget.name).toBe('GNU Make: default (no target)');
          expect(defaultTarget.exec).toBe('make');
          expect(defaultTarget.args).toEqual(['-j2']);
          expect(defaultTarget.sh).toBe(false);
        });
      });
    });
  });

  describe('when makefile does not exist', function () {
    it('should not be eligible', function () {
      expect(builder.isEligible(directory)).toBe(false);
    });
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3NndWVudGhlci8uYXRvbS9wYWNrYWdlcy9idWlsZC1tYWtlL3NwZWMvYnVpbGQtbWFrZS1zcGVjLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O3VCQUVlLFVBQVU7Ozs7b0JBQ1IsTUFBTTs7OztvQ0FDRCx5QkFBeUI7O3VCQUNoQixhQUFhOztBQUw1QyxXQUFXLENBQUM7O0FBT1osUUFBUSxDQUFDLE1BQU0sRUFBRSxZQUFNO0FBQ3JCLE1BQUksU0FBUyxZQUFBLENBQUM7QUFDZCxNQUFJLE9BQU8sWUFBQSxDQUFDO0FBQ1osTUFBTSxPQUFPLEdBQUcsOEJBQWdCLENBQUM7O0FBRWpDLFlBQVUsQ0FBQyxZQUFNO0FBQ2YsUUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsb0JBQW9CLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDNUMsUUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDdEMsbUJBQWUsQ0FBQyxZQUFNO0FBQ3BCLGFBQU8saUNBQU0sa0JBQUssS0FBSyxFQUFFLHVCQUF1QixDQUFDLENBQzlDLElBQUksQ0FBQyxVQUFDLEdBQUc7ZUFBSyxpQ0FBTSxxQkFBRyxRQUFRLEVBQUUsR0FBRyxDQUFDO09BQUEsQ0FBQyxDQUN0QyxJQUFJLENBQUMsVUFBQyxHQUFHO2VBQU0sU0FBUyxHQUFNLEdBQUcsTUFBRztPQUFDLENBQUMsQ0FDdEMsSUFBSSxDQUFDLFVBQUMsR0FBRztlQUFLLE9BQU8sR0FBRyxJQUFJLE9BQU8sQ0FBQyxHQUFHLENBQUM7T0FBQSxDQUFDLENBQUM7S0FDOUMsQ0FBQyxDQUFDO0dBQ0osQ0FBQyxDQUFDOztBQUVILFdBQVMsQ0FBQyxZQUFNO0FBQ2QseUJBQUcsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0dBQzFCLENBQUMsQ0FBQzs7QUFFSCxVQUFRLENBQUMsc0JBQXNCLEVBQUUsWUFBTTtBQUNyQyxjQUFVLENBQUMsWUFBTTtBQUNmLDJCQUFH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QUFNLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUN0QyxDQUFDLENBQUM7T0FDSixDQUFDLENBQUM7S0FDSixDQUFDLENBQUM7R0FDSixDQUFDLENBQUM7O0FBRUgsVUFBUSxDQUFDLDhCQUE4QixFQUFFLFlBQU07QUFDN0MsTUFBRSxDQUFDLHdCQUF3QixFQUFFLFlBQU07QUFDakMsWUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDbkQsQ0FBQyxDQUFDO0dBQ0osQ0FBQyxDQUFDO0NBQ0osQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3NndWVudGhlci8uYXRvbS9wYWNrYWdlcy9idWlsZC1tYWtlL3NwZWMvYnVpbGQtbWFrZS1zcGVjLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBiYWJlbCc7XG5cbmltcG9ydCBmcyBmcm9tICdmcy1leHRyYSc7XG5pbXBvcnQgdGVtcCBmcm9tICd0ZW1wJztcbmltcG9ydCB7IHZvdWNoIH0gZnJvbSAnYXRvbS1idWlsZC1zcGVjLWhlbHBlcnMnO1xuaW1wb3J0IHsgcHJvdmlkZUJ1aWxkZXIgfSBmcm9tICcuLi9saWIvbWFrZSc7XG5cbmRlc2NyaWJlKCdtYWtlJywgKCkgPT4ge1xuICBsZXQgZGlyZWN0b3J5O1xuICBsZXQgYnVpbGRlcjtcbiAgY29uc3QgQnVpbGRlciA9IHByb3ZpZGVCdWlsZGVyKCk7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgYXRvbS5jb25maWcuc2V0KCdidWlsZC1tYWtlLnVzZU1ha2UnLCB0cnVlKTtcbiAgICBhdG9tLmNvbmZpZy5zZXQoJ2J1aWxkLW1ha2Uuam9icycsIDIpO1xuICAgIHdhaXRzRm9yUHJvbWlzZSgoKSA9PiB7XG4gICAgICByZXR1cm4gdm91Y2godGVtcC5ta2RpciwgJ2F0b20tYnVpbGQtbWFrZS1zcGVjLScpXG4gICAgICAgIC50aGVuKChkaXIpID0+IHZvdWNoKGZzLnJlYWxwYXRoLCBkaXIpKVxuICAgICAgICAudGhlbigoZGlyKSA9PiAoZGlyZWN0b3J5ID0gYCR7ZGlyfS9gKSlcbiAgICAgICAgLnRoZW4oKGRpcikgPT4gYnVpbGRlciA9IG5ldyBCdWlsZGVyKGRpcikpO1xuICAgIH0pO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGZzLnJlbW92ZVN5bmMoZGlyZWN0b3J5KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3doZW4gbWFrZWZpbGUgZXhpc3RzJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgZnMud3JpdGVGaWxlU3luYyhkaXJlY3RvcnkgKyAnTWFrZWZpbGUnLCBmcy5yZWFkRmlsZVN5bmMoYCR7X19kaXJuYW1lfS9NYWtlZmlsZWApKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYmUgZWxpZ2libGUnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoYnVpbGRlci5pc0VsaWdpYmxlKGRpcmVjdG9yeSkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHlpZWxkIGF2YWlsYWJsZSB0YXJnZXRzJywgKCkgPT4ge1xuICAgICAgd2FpdHNGb3JQcm9taXNlKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShidWlsZGVyLnNldHRpbmdzKGRpcmVjdG9yeSkpLnRoZW4oKHNldHRpbmdzKSA9PiB7XG4gICAgICAgICAgZXhwZWN0KHNldHRpbmdzLmxlbmd0aCkudG9CZSg0KTsgLy8gZGVmYXVsdCAobm8gdGFyZ2V0KSwgYWxsLCBzb21lX2N1c3RvbSBhbmQgTWFrZWZpbGVcblxuICAgICAgICAgIGNvbnN0IGRlZmF1bHRUYXJnZXQgPSBzZXR0aW5nc1swXTsgLy8gZGVmYXVsdCBNVVNUIGJlIGZpcnN0XG4gICAgICAgICAgZXhwZWN0KGRlZmF1bHRUYXJnZXQubmFtZSkudG9CZSgnR05VIE1ha2U6IGRlZmF1bHQgKG5vIHRhcmdldCknKTtcbiAgICAgICAgICBleHBlY3QoZGVmYXVsdFRhcmdldC5leGVjKS50b0JlKCdtYWtlJyk7XG4gICAgICAgICAgZXhwZWN0KGRlZmF1bHRUYXJnZXQuYXJncykudG9FcXVhbChbICctajInIF0pO1xuICAgICAgICAgIGV4cGVjdChkZWZhdWx0VGFyZ2V0LnNoKS50b0JlKGZhbHNlKTtcblxuICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHNldHRpbmdzLmZpbmQoc2V0dGluZyA9PiBzZXR0aW5nLm5hbWUgPT09ICdHTlUgTWFrZTogc29tZV9jdXN0b20nKTtcbiAgICAgICAgICBleHBlY3QodGFyZ2V0Lm5hbWUpLnRvQmUoJ0dOVSBNYWtlOiBzb21lX2N1c3RvbScpO1xuICAgICAgICAgIGV4cGVjdCh0YXJnZXQuZXhlYykudG9CZSgnbWFrZScpO1xuICAgICAgICAgIGV4cGVjdCh0YXJnZXQuYXJncykudG9FcXVhbChbICctajInLCAnc29tZV9jdXN0b20nIF0pO1xuICAgICAgICAgIGV4cGVjdCh0YXJnZXQuc2gpLnRvQmUoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB5aWVsZCBhIHN1YnNldCBvZiBhbGwgdGFyZ2V0cyBpZiBpdCBkb2VzIG5vdCB1c2UgbWFrZSB0byBleHRyYWN0IHRhcmdldHMnLCAoKSA9PiB7XG4gICAgICBhdG9tLmNvbmZpZy5zZXQoJ2J1aWxkLW1ha2UudXNlTWFrZScsIGZhbHNlKTtcbiAgICAgIHdhaXRzRm9yUHJvbWlzZSgoKSA9PiB7XG4gICAgICAgIGV4cGVjdChidWlsZGVyLmlzRWxpZ2libGUoZGlyZWN0b3J5KSkudG9CZSh0cnVlKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShidWlsZGVyLnNldHRpbmdzKGRpcmVjdG9yeSkpLnRoZW4oKHNldHRpbmdzKSA9PiB7XG4gICAgICAgICAgY29uc3QgdGFyZ2V0TmFtZXMgPSBzZXR0aW5ncy5tYXAocyA9PiBzLm5hbWUpLnNvcnQoKTtcbiAgICAgICAgICBleHBlY3QodGFyZ2V0TmFtZXMpLnRvRXF1YWwoWyAnR05VIE1ha2U6IGRlZmF1bHQgKG5vIHRhcmdldCknLCAnR05VIE1ha2U6IGFsbCcsICdHTlUgTWFrZTogc29tZV9jdXN0b20nIF0uc29ydCgpKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3doZW4gbWFrZWZpbGUgZXhpc3RzIGJ1dCBtYWtlIGNhbiBub3QgcnVuJywgKCkgPT4ge1xuICAgIGNvbnN0IG9yaWdpbmFsUGF0aCA9IHByb2Nlc3MuZW52LlBBVEg7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBmcy53cml0ZUZpbGVTeW5jKGRpcmVjdG9yeSArICdNYWtlZmlsZScsIGZzLnJlYWRGaWxlU3luYyhgJHtfX2Rpcm5hbWV9L01ha2VmaWxlYCkpO1xuICAgICAgcHJvY2Vzcy5lbnYuUEFUSCA9ICcnO1xuICAgIH0pO1xuXG4gICAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICAgIHByb2Nlc3MuZW52LlBBVEggPSBvcmlnaW5hbFBhdGg7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGJlIGVsaWdpYmxlJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KGJ1aWxkZXIuaXNFbGlnaWJsZShkaXJlY3RvcnkpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsaXN0IHRoZSBkZWZhdWx0IHRhcmdldCcsICgpID0+IHtcbiAgICAgIHdhaXRzRm9yUHJvbWlzZSgoKSA9PiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoYnVpbGRlci5zZXR0aW5ncyhkaXJlY3RvcnkpKS50aGVuKChzZXR0aW5ncykgPT4ge1xuICAgICAgICAgIGV4cGVjdChzZXR0aW5ncy5sZW5ndGgpLnRvQmUoMSk7IC8vIGRlZmF1bHQgKG5vIHRhcmdldClcblxuICAgICAgICAgIGNvbnN0IGRlZmF1bHRUYXJnZXQgPSBzZXR0aW5nc1swXTsgLy8gZGVmYXVsdCBNVVNUIGJlIGZpcnN0XG4gICAgICAgICAgZXhwZWN0KGRlZmF1bHRUYXJnZXQubmFtZSkudG9CZSgnR05VIE1ha2U6IGRlZmF1bHQgKG5vIHRhcmdldCknKTtcbiAgICAgICAgICBleHBlY3QoZGVmYXVsdFRhcmdldC5leGVjKS50b0JlKCdtYWtlJyk7XG4gICAgICAgICAgZXhwZWN0KGRlZmF1bHRUYXJnZXQuYXJncykudG9FcXVhbChbICctajInIF0pO1xuICAgICAgICAgIGV4cGVjdChkZWZhdWx0VGFyZ2V0LnNoKS50b0JlKGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3doZW4gbWFrZWZpbGUgZG9lcyBub3QgZXhpc3QnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBub3QgYmUgZWxpZ2libGUnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoYnVpbGRlci5pc0VsaWdpYmxlKGRpcmVjdG9yeSkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl19
//# sourceURL=/home/sguenther/.atom/packages/build-make/spec/build-make-spec.js
