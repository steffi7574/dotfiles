function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _specHelpers = require('./spec-helpers');

var _specHelpers2 = _interopRequireDefault(_specHelpers);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _libBuilder = require('../lib/builder');

var _libBuilder2 = _interopRequireDefault(_libBuilder);

'use babel';

describe('Builder', function () {
  var builder = undefined,
      fixturesPath = undefined,
      filePath = undefined,
      logFilePath = undefined;

  beforeEach(function () {
    builder = new _libBuilder2['default']();
    fixturesPath = _specHelpers2['default'].cloneFixtures();
    filePath = _path2['default'].join(fixturesPath, 'file.tex');
    logFilePath = _path2['default'].join(fixturesPath, 'file.log');
  });

  describe('constructPath', function () {
    it('reads `latex.texPath` as configured', function () {
      spyOn(atom.config, 'get').andReturn();
      builder.constructPath();

      expect(atom.config.get).toHaveBeenCalledWith('latex.texPath');
    });

    it('uses platform default when `latex.texPath` is not configured', function () {
      var defaultTexPath = '/foo/bar';
      var expectedPath = [defaultTexPath, process.env.PATH].join(_path2['default'].delimiter);
      _specHelpers2['default'].spyOnConfig('latex.texPath', '');
      spyOn(builder, 'defaultTexPath').andReturn(defaultTexPath);

      var constructedPath = builder.constructPath();

      expect(constructedPath).toBe(expectedPath);
    });

    it('replaces surrounded $PATH with process.env.PATH', function () {
      var texPath = '/foo:$PATH:/bar';
      var expectedPath = texPath.replace('$PATH', process.env.PATH);
      _specHelpers2['default'].spyOnConfig('latex.texPath', texPath);

      var constructedPath = builder.constructPath();

      expect(constructedPath).toBe(expectedPath);
    });

    it('replaces leading $PATH with process.env.PATH', function () {
      var texPath = '$PATH:/bar';
      var expectedPath = texPath.replace('$PATH', process.env.PATH);
      _specHelpers2['default'].spyOnConfig('latex.texPath', texPath);

      var constructedPath = builder.constructPath();

      expect(constructedPath).toBe(expectedPath);
    });

    it('replaces trailing $PATH with process.env.PATH', function () {
      var texPath = '/foo:$PATH';
      var expectedPath = texPath.replace('$PATH', process.env.PATH);
      _specHelpers2['default'].spyOnConfig('latex.texPath', texPath);

      var constructedPath = builder.constructPath();

      expect(constructedPath).toBe(expectedPath);
    });

    it('prepends process.env.PATH with texPath', function () {
      var texPath = '/foo';
      var expectedPath = [texPath, process.env.PATH].join(_path2['default'].delimiter);
      _specHelpers2['default'].spyOnConfig('latex.texPath', texPath);

      var constructedPath = builder.constructPath();

      expect(constructedPath).toBe(expectedPath);
    });
  });

  describe('parseLogFile', function () {
    var logParser = undefined;

    beforeEach(function () {
      logParser = jasmine.createSpyObj('MockLogParser', ['parse']);
      spyOn(builder, 'getLogParser').andReturn(logParser);
    });

    it('resolves the associated log file path by invoking @resolveLogFilePath', function () {
      spyOn(builder, 'resolveLogFilePath').andReturn('foo.log');
      builder.parseLogFile(filePath);

      expect(builder.resolveLogFilePath).toHaveBeenCalledWith(filePath);
    });

    it('returns null if passed a file path that does not exist', function () {
      filePath = '/foo/bar/quux.tex';
      var result = builder.parseLogFile(filePath);

      expect(result).toBeNull();
      expect(logParser.parse).not.toHaveBeenCalled();
    });

    it('attempts to parse the resolved log file', function () {
      builder.parseLogFile(filePath);

      expect(builder.getLogParser).toHaveBeenCalledWith(logFilePath);
      expect(logParser.parse).toHaveBeenCalled();
    });
  });

  describe('getLatexEngineFromMagic', function () {
    it('detects program magic and outputs correct engine', function () {
      var filePath = _path2['default'].join(fixturesPath, 'magic-comments', 'latex-engine.tex');
      expect(builder.getLatexEngineFromMagic(filePath)).toEqual('pdflatex');
    });
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3NndWVudGhlci8uYXRvbS9wYWNrYWdlcy9sYXRleC9zcGVjL2J1aWxkZXItc3BlYy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzsyQkFFb0IsZ0JBQWdCOzs7O29CQUNuQixNQUFNOzs7OzBCQUNILGdCQUFnQjs7OztBQUpwQyxXQUFXLENBQUE7O0FBTVgsUUFBUSxDQUFDLFNBQVMsRUFBRSxZQUFNO0FBQ3hCLE1BQUksT0FBTyxZQUFBO01BQUUsWUFBWSxZQUFBO01BQUUsUUFBUSxZQUFBO01BQUUsV0FBVyxZQUFBLENBQUE7O0FBRWhELFlBQVUsQ0FBQyxZQUFNO0FBQ2YsV0FBTyxHQUFHLDZCQUFhLENBQUE7QUFDdkIsZ0JBQVksR0FBRyx5QkFBUSxhQUFhLEVBQUUsQ0FBQTtBQUN0QyxZQUFRLEdBQUcsa0JBQUssSUFBSSxDQUFDLFlBQVksRUFBRSxVQUFVLENBQUMsQ0FBQTtBQUM5QyxlQUFXLEdBQUcsa0JBQUssSUFBSSxDQUFDLFlBQVksRUFBRSxVQUFVLENBQUMsQ0FBQTtHQUNsRCxDQUFDLENBQUE7O0FBRUYsVUFBUSxDQUFDLGVBQWUsRUFBRSxZQUFNO0FBQzlCLE1BQUUsQ0FBQyxxQ0FBcUMsRUFBRSxZQUFNO0FBQzlDLFdBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFBO0FBQ3JDLGFBQU8sQ0FBQyxhQUFhLEVBQUUsQ0FBQTs7QUFFdkIsWUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsb0JBQW9CLENBQUMsZUFBZSxDQUFDLENBQUE7S0FDOUQsQ0FBQyxDQUFBOztBQUVGLE1BQUUsQ0FBQyw4REFBOEQsRUFBRSxZQUFNO0FBQ3ZFLFVBQU0sY0FBYyxHQUFHLFVBQVUsQ0FBQTtBQUNqQyxVQUFNLFlBQVksR0FBRyxDQUFDLGNBQWMsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxrQkFBSyxT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QUFVLENBQUMsQ0FBQTtLQUN0RSxDQUFDLENBQUE7R0FDSCxDQUFDLENBQUE7Q0FDSCxDQUFDLENBQUEiLCJmaWxlIjoiL2hvbWUvc2d1ZW50aGVyLy5hdG9tL3BhY2thZ2VzL2xhdGV4L3NwZWMvYnVpbGRlci1zcGVjLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBiYWJlbCdcblxuaW1wb3J0IGhlbHBlcnMgZnJvbSAnLi9zcGVjLWhlbHBlcnMnXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xuaW1wb3J0IEJ1aWxkZXIgZnJvbSAnLi4vbGliL2J1aWxkZXInXG5cbmRlc2NyaWJlKCdCdWlsZGVyJywgKCkgPT4ge1xuICBsZXQgYnVpbGRlciwgZml4dHVyZXNQYXRoLCBmaWxlUGF0aCwgbG9nRmlsZVBhdGhcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBidWlsZGVyID0gbmV3IEJ1aWxkZXIoKVxuICAgIGZpeHR1cmVzUGF0aCA9IGhlbHBlcnMuY2xvbmVGaXh0dXJlcygpXG4gICAgZmlsZVBhdGggPSBwYXRoLmpvaW4oZml4dHVyZXNQYXRoLCAnZmlsZS50ZXgnKVxuICAgIGxvZ0ZpbGVQYXRoID0gcGF0aC5qb2luKGZpeHR1cmVzUGF0aCwgJ2ZpbGUubG9nJylcbiAgfSlcblxuICBkZXNjcmliZSgnY29uc3RydWN0UGF0aCcsICgpID0+IHtcbiAgICBpdCgncmVhZHMgYGxhdGV4LnRleFBhdGhgIGFzIGNvbmZpZ3VyZWQnLCAoKSA9PiB7XG4gICAgICBzcHlPbihhdG9tLmNvbmZpZywgJ2dldCcpLmFuZFJldHVybigpXG4gICAgICBidWlsZGVyLmNvbnN0cnVjdFBhdGgoKVxuXG4gICAgICBleHBlY3QoYXRvbS5jb25maWcuZ2V0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnbGF0ZXgudGV4UGF0aCcpXG4gICAgfSlcblxuICAgIGl0KCd1c2VzIHBsYXRmb3JtIGRlZmF1bHQgd2hlbiBgbGF0ZXgudGV4UGF0aGAgaXMgbm90IGNvbmZpZ3VyZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBkZWZhdWx0VGV4UGF0aCA9ICcvZm9vL2JhcidcbiAgICAgIGNvbnN0IGV4cGVjdGVkUGF0aCA9IFtkZWZhdWx0VGV4UGF0aCwgcHJvY2Vzcy5lbnYuUEFUSF0uam9pbihwYXRoLmRlbGltaXRlcilcbiAgICAgIGhlbHBlcnMuc3B5T25Db25maWcoJ2xhdGV4LnRleFBhdGgnLCAnJylcbiAgICAgIHNweU9uKGJ1aWxkZXIsICdkZWZhdWx0VGV4UGF0aCcpLmFuZFJldHVybihkZWZhdWx0VGV4UGF0aClcblxuICAgICAgY29uc3QgY29uc3RydWN0ZWRQYXRoID0gYnVpbGRlci5jb25zdHJ1Y3RQYXRoKClcblxuICAgICAgZXhwZWN0KGNvbnN0cnVjdGVkUGF0aCkudG9CZShleHBlY3RlZFBhdGgpXG4gICAgfSlcblxuICAgIGl0KCdyZXBsYWNlcyBzdXJyb3VuZGVkICRQQVRIIHdpdGggcHJvY2Vzcy5lbnYuUEFUSCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHRleFBhdGggPSAnL2ZvbzokUEFUSDovYmFyJ1xuICAgICAgY29uc3QgZXhwZWN0ZWRQYXRoID0gdGV4UGF0aC5yZXBsYWNlKCckUEFUSCcsIHByb2Nlc3MuZW52LlBBVEgpXG4gICAgICBoZWxwZXJzLnNweU9uQ29uZmlnKCdsYXRleC50ZXhQYXRoJywgdGV4UGF0aClcblxuICAgICAgY29uc3QgY29uc3RydWN0ZWRQYXRoID0gYnVpbGRlci5jb25zdHJ1Y3RQYXRoKClcblxuICAgICAgZXhwZWN0KGNvbnN0cnVjdGVkUGF0aCkudG9CZShleHBlY3RlZFBhdGgpXG4gICAgfSlcblxuICAgIGl0KCdyZXBsYWNlcyBsZWFkaW5nICRQQVRIIHdpdGggcHJvY2Vzcy5lbnYuUEFUSCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHRleFBhdGggPSAnJFBBVEg6L2JhcidcbiAgICAgIGNvbnN0IGV4cGVjdGVkUGF0aCA9IHRleFBhdGgucmVwbGFjZSgnJFBBVEgnLCBwcm9jZXNzLmVudi5QQVRIKVxuICAgICAgaGVscGVycy5zcHlPbkNvbmZpZygnbGF0ZXgudGV4UGF0aCcsIHRleFBhdGgpXG5cbiAgICAgIGNvbnN0IGNvbnN0cnVjdGVkUGF0aCA9IGJ1aWxkZXIuY29uc3RydWN0UGF0aCgpXG5cbiAgICAgIGV4cGVjdChjb25zdHJ1Y3RlZFBhdGgpLnRvQmUoZXhwZWN0ZWRQYXRoKVxuICAgIH0pXG5cbiAgICBpdCgncmVwbGFjZXMgdHJhaWxpbmcgJFBBVEggd2l0aCBwcm9jZXNzLmVudi5QQVRIJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGV4UGF0aCA9ICcvZm9vOiRQQVRIJ1xuICAgICAgY29uc3QgZXhwZWN0ZWRQYXRoID0gdGV4UGF0aC5yZXBsYWNlKCckUEFUSCcsIHByb2Nlc3MuZW52LlBBVEgpXG4gICAgICBoZWxwZXJzLnNweU9uQ29uZmlnKCdsYXRleC50ZXhQYXRoJywgdGV4UGF0aClcblxuICAgICAgY29uc3QgY29uc3RydWN0ZWRQYXRoID0gYnVpbGRlci5jb25zdHJ1Y3RQYXRoKClcblxuICAgICAgZXhwZWN0KGNvbnN0cnVjdGVkUGF0aCkudG9CZShleHBlY3RlZFBhdGgpXG4gICAgfSlcblxuICAgIGl0KCdwcmVwZW5kcyBwcm9jZXNzLmVudi5QQVRIIHdpdGggdGV4UGF0aCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHRleFBhdGggPSAnL2ZvbydcbiAgICAgIGNvbnN0IGV4cGVjdGVkUGF0aCA9IFt0ZXhQYXRoLCBwcm9jZXNzLmVudi5QQVRIXS5qb2luKHBhdGguZGVsaW1pdGVyKVxuICAgICAgaGVscGVycy5zcHlPbkNvbmZpZygnbGF0ZXgudGV4UGF0aCcsIHRleFBhdGgpXG5cbiAgICAgIGNvbnN0IGNvbnN0cnVjdGVkUGF0aCA9IGJ1aWxkZXIuY29uc3RydWN0UGF0aCgpXG5cbiAgICAgIGV4cGVjdChjb25zdHJ1Y3RlZFBhdGgpLnRvQmUoZXhwZWN0ZWRQYXRoKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ3BhcnNlTG9nRmlsZScsICgpID0+IHtcbiAgICBsZXQgbG9nUGFyc2VyXG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIGxvZ1BhcnNlciA9IGphc21pbmUuY3JlYXRlU3B5T2JqKCdNb2NrTG9nUGFyc2VyJywgWydwYXJzZSddKVxuICAgICAgc3B5T24oYnVpbGRlciwgJ2dldExvZ1BhcnNlcicpLmFuZFJldHVybihsb2dQYXJzZXIpXG4gICAgfSlcblxuICAgIGl0KCdyZXNvbHZlcyB0aGUgYXNzb2NpYXRlZCBsb2cgZmlsZSBwYXRoIGJ5IGludm9raW5nIEByZXNvbHZlTG9nRmlsZVBhdGgnLCAoKSA9PiB7XG4gICAgICBzcHlPbihidWlsZGVyLCAncmVzb2x2ZUxvZ0ZpbGVQYXRoJykuYW5kUmV0dXJuKCdmb28ubG9nJylcbiAgICAgIGJ1aWxkZXIucGFyc2VMb2dGaWxlKGZpbGVQYXRoKVxuXG4gICAgICBleHBlY3QoYnVpbGRlci5yZXNvbHZlTG9nRmlsZVBhdGgpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGZpbGVQYXRoKVxuICAgIH0pXG5cbiAgICBpdCgncmV0dXJucyBudWxsIGlmIHBhc3NlZCBhIGZpbGUgcGF0aCB0aGF0IGRvZXMgbm90IGV4aXN0JywgKCkgPT4ge1xuICAgICAgZmlsZVBhdGggPSAnL2Zvby9iYXIvcXV1eC50ZXgnXG4gICAgICBjb25zdCByZXN1bHQgPSBidWlsZGVyLnBhcnNlTG9nRmlsZShmaWxlUGF0aClcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZU51bGwoKVxuICAgICAgZXhwZWN0KGxvZ1BhcnNlci5wYXJzZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgIH0pXG5cbiAgICBpdCgnYXR0ZW1wdHMgdG8gcGFyc2UgdGhlIHJlc29sdmVkIGxvZyBmaWxlJywgKCkgPT4ge1xuICAgICAgYnVpbGRlci5wYXJzZUxvZ0ZpbGUoZmlsZVBhdGgpXG5cbiAgICAgIGV4cGVjdChidWlsZGVyLmdldExvZ1BhcnNlcikudG9IYXZlQmVlbkNhbGxlZFdpdGgobG9nRmlsZVBhdGgpXG4gICAgICBleHBlY3QobG9nUGFyc2VyLnBhcnNlKS50b0hhdmVCZWVuQ2FsbGVkKClcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdnZXRMYXRleEVuZ2luZUZyb21NYWdpYycsICgpID0+IHtcbiAgICBpdCgnZGV0ZWN0cyBwcm9ncmFtIG1hZ2ljIGFuZCBvdXRwdXRzIGNvcnJlY3QgZW5naW5lJywgKCkgPT4ge1xuICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4oZml4dHVyZXNQYXRoLCAnbWFnaWMtY29tbWVudHMnLCAnbGF0ZXgtZW5naW5lLnRleCcpXG4gICAgICBleHBlY3QoYnVpbGRlci5nZXRMYXRleEVuZ2luZUZyb21NYWdpYyhmaWxlUGF0aCkpLnRvRXF1YWwoJ3BkZmxhdGV4JylcbiAgICB9KVxuICB9KVxufSlcbiJdfQ==
//# sourceURL=/home/sguenther/.atom/packages/latex/spec/builder-spec.js
